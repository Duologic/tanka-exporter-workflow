# Generated with `make gen`
description: "Install Tanka from the GitHub releases"
inputs:
  version:
    default: "0.27.1"
    description: "Version of Tanka to install."
name: "Install Tanka"
runs:
  steps:
    - id: "restore-tk-linux-amd64-${{ inputs.version }}"
      name: "Restore cache tk-linux-amd64-${{ inputs.version }}"
      uses: "actions/cache/restore@v4"
      with:
        key: "tk-linux-amd64-${{ inputs.version }}"
        path: "${{ github.workspace }}/bin"
    - id: "fetch_asset"
      if: "steps.restore-tk-linux-amd64-${{ inputs.version }}.outputs.cache-hit != 'true'"
      name: "Fetch Github Release Asset"
      uses: "dsaltares/fetch-gh-release-asset@master"
      with:
        file: "tk-linux-amd64"
        repo: "grafana/tanka"
        target: "${{ github.workspace }}/bin/tk"
        version: "tags/v${{ inputs.version }}"
    - id: "chmod"
      if: "steps.fetch_asset.outcome == 'success'"
      name: "Make tk executable"
      run: "chmod +x ${{ github.workspace }}/bin/tk"
      shell: "sh"
    - id: "save-tk-linux-amd64-${{ inputs.version }}"
      name: "Save to cache tk-linux-amd64-${{ inputs.version }}"
      uses: "actions/cache/save@v4"
      with:
        key: "tk-linux-amd64-${{ inputs.version }}"
        path: "${{ github.workspace }}/bin"
  using: "composite"