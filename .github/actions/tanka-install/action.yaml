# Generated, please do not edit.
name: "Install tk"
description: "Install tk from the GitHub releases"

inputs:
  version:
    default: "0.27.1"
    description: "Version of tk to install."

runs:
  using: "composite"

  steps:
    - id: "restore"
      name: "Restore cache tk-linux-amd64-${{ inputs.version }}"
      uses: "actions/cache/restore@v4"
      with:
        key: "tk-linux-amd64-${{ inputs.version }}"
        path: "${{ github.workspace }}/bin"
    - id: "fetch_asset"
      if: "steps.restore.outputs.cache-hit != 'true'"
      name: "Fetch Github Release Asset"
      uses: "dsaltares/fetch-gh-release-asset@master"
      with:
        file: "tk-linux-amd64"
        repo: "grafana/tanka"
        target: "${{ github.workspace }}/bin/tk"
        version: "tags/v${{ inputs.version }}"
    - if: "steps.fetch_asset.outcome == 'success'"
      name: "Make tk executable"
      run: "chmod +x ${{ github.workspace }}/bin/tk"
      shell: "sh"
    - name: "Add binary to path"
      run: "echo \"${{ github.workspace }}/bin\" >> $GITHUB_PATH"
      shell: "sh"
    - id: "save"
      if: "steps.fetch_asset.outcome == 'success'"
      name: "Save to cache tk-linux-amd64-${{ inputs.version }}"
      uses: "actions/cache/save@v4"
      with:
        key: "${{ steps.restore.outputs.cache-primary-key }}"
        path: "${{ github.workspace }}/bin"